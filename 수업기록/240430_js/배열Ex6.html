<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <title>배열 Ex6</title>
</head>

<body>
  <h1>배열 Ex6</h1>
  <h2 class="title">현재 날짜와 시간</h2>
  <!-- 
    현재 년 월 일 요일 AM/PM 시: 분: 초
    24시간제 x -> 12 시간제

    2024년 04 30일 화요일 PM 05: 01: 15 <- 출력

    1초에 한번씩 실행
    setTimeout(function() {}, 시간); 지정 시간 후 한 번만 실행
    setInterval(콜백함수, 1000); 지정 시간 마다 실행

    재귀 함수 :
       함수 내부에서 자기 자신을 호출하는 함수
       재귀 함수 사용시 종료 조건을 설정하지 않으면 무한 호출 됨
       내부적으로 호출 스택(clal stack)을 사용하기 때문에 호출시 스택이 쌓이게 되고 각 호출이 종료되면 스택에서 제거됨
       단점. 메모리 사용이 많음.

     즉시 실행 함수
    (function 함수명 () {})();
    (function 함수명 () {} ());  
   -->
  <script>
    /*     
        let today = new Date();   
    
        let year = today.getFullYear(); // 년도
        let month = today.getMonth() + 1;  // 월
        let date = today.getDate();  // 날짜
        let day = today.getDay();  // 요일
        let hours = today.getHours(); // 시
        let minutes = today.getMinutes();  // 분
        let seconds = today.getSeconds();  // 초
        let milliseconds = today.getMilliseconds(); // 밀리초
    
        const now = new Date().getDay();
        day = ["일","월","화","수","목","금","토"];
        
        document.write(year + '년' + month + '월' + date + '일' + day[now] + '요일' + hours + ':' + minutes + ':' + seconds );
    
     */
    //const time = () => { 

    (function time() {
    const now = new Date();
    const year = now.getFullYear();
    const month = now.getMonth() + 1;
    const date = now.getDate();
    let day = ["일", "월", "화", "수", "목", "금", "토"];
    // const dayIndex = now.getDay(); // 0~6까지의 숫자
    // day = day[dayIndex]; //재할당
    day = day[now.getDay()];

    let hour = now.getHours(); // 0~23
    /*  
        let ampm = '';
        if(hour >= 12){
          ampm = '오후';
        }else{
          ampm = '오전';
        } */
    const ampm = hour >= 12 ? '오후' : '오전'; //조건 ? true : false ;

    hour = hour % 12;
    hour = hour ? hour : 12; //0시는 12시로 표현 0은 false

    //두자리 숫자로 변경
    /* if(hour < 10){
      hour = '0' + hour;
    }else{
      hour;
    } */

    hour = hour < 10 ? '0' + hour : hour;

    // .padStart(문자열길이, '채워넣을 문자');
    const min = now.getMinutes().toString().padStart(2, '0');
    const sec = now.getSeconds().toString().padStart(2, '0');//2자리가 안되면 0을 채워넣겠다.


    const output = `${year}년 ${month}월 ${date}일 ${day}요일 ${ampm} ${hour}:${min}:${sec}`;

    document.querySelector('.title').innerText = output;
    
    setTimeout (time,1000); //1초 있다가 time을 부르고 멈춤(누적된 값을 비움)

   })();// 즉시실행함수. 스크립트 리더기를 만나면 즉시 실행

  // }
  
    // setInterval(time, 1000);

    // time(); //처음부터 다시 1초가 시작




  </script>
</body>

</html>